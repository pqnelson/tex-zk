%\usepackage[top=1in,bottom=1in,inner=1in,outer=1in]{geometry}
\usepackage{iso2145}
\usepackage{amsmath,amssymb}

\RequirePackage[dvipsnames,HTML]{xcolor}
\RequirePackage{hyperref}
% eTeX uses this color for links, it's better than BrickRed imho
\definecolor{linkRed}{cmyk}{0.28, 1, 1, 0.35}
\hypersetup{colorlinks=true,
    linkcolor=linkRed,
    citecolor=linkRed,
    filecolor=linkRed,
    urlcolor=linkRed
}

% Example of iso2145 theorem environments:
\newtheorem{theorem}{Theorem}{\it}
\newtheorem{corollary}{Corollary}{\it}
\newtheorem{definition}{Definition}{}
\newtheorem{puzzle}{Puzzle}{}

%%%%
% Sectioning commands
%%%%
\def\resetParagraphChunks{
  \gdef\secprefix{}
  \global\sectionDepth=0
  \setSection{0}
}
\DeclareRobustCommand\chunk@start@section{\resetParagraphChunks%
  \gdef\theHchunk{\thesection\secprefix\arabic{chunk}.}%
  \gdef\nodeprefix{\thesection}}
\DeclareRobustCommand\chunks@start@subsection{\resetParagraphChunks%
  \gdef\theHchunk{\thesubsection.\secprefix\arabic{chunk}.}%
  \gdef\nodeprefix{\thesubsection}}
\DeclareRobustCommand\chunks@start@subsubsection{\resetParagraphChunks%
  \gdef\theHchunk{\thesubsubsection.\secprefix\arabic{chunk}.}%
  \gdef\nodeprefix{\thesubsubsection}}

\let\og@section\section
\let\og@subsection\subsection
\let\og@subsubsection\subsubsection
\def\section{\chunk@start@section\og@section}
\def\subsection{\chunk@start@subsection\og@subsection}
\def\subsubsection{\chunk@start@subsubsection\og@subsubsection}

\@ifclassloaded{amsbook}{\renewcommand\thesection{\thechapter.\arabic{section}}}{}

\ifdefined\chapter
% If you don't want to have nodes numbered "<chapter>.0.<node>"
% just change \nodeprefix to:
% \gdef\nodeprefix{\thechapter}
\DeclareRobustCommand\chunk@start@chapter{\resetParagraphChunks%
  \gdef\theHchunk{\thechapter.\secprefix\arabic{chunk}.}%
  \gdef\nodeprefix{\thechapter.\arabic{section}}}
\DeclareRobustCommand\chunk@start@chapter@nonumber{\resetParagraphChunks%
  \gdef\theHchunk{\thechapter.\secprefix\arabic{chunk}.}%
  \gdef\nodeprefix{\thechapter}}
\let\og@chapter\@chapter
\let\og@schapter\@schapter
\def\@schapter{\chunk@start@chapter@nonumber\og@schapter}
\def\@chapter{\chunk@start@chapter\og@chapter}
\fi


%%%%%%
% ArXiV links
\def\arXiv{\@ifnextchar[{\@arXivWith}{\@arXivWithout}}
\def\@arXivWith[#1]#2{\texttt{\href{http://arxiv.org/abs/#2}{arXiv:#2} [#1]}}
\def\@arXivWithout#1{\texttt{\href{http://arxiv.org/abs/#1}{arXiv:#1}}}

% page numbering should never reset
\def\pagenumbering#1{%
  \gdef\thepage{\csname @#1\endcsname
   \c@page}}

\@ifclassloaded{report}{%
  \if@compatibility
  \renewenvironment{titlepage}
    {%
      \if@twocolumn
        \@restonecoltrue\onecolumn
      \else
        \@restonecolfalse\newpage
      \fi
      \thispagestyle{empty}
    }%
    {\if@restonecol\twocolumn \else \newpage \fi
    }
    \else
  \renewenvironment{titlepage}
    {%
      \if@twocolumn
        \@restonecoltrue\onecolumn
      \else
        \@restonecolfalse\newpage
      \fi
      \thispagestyle{empty}%
      \setcounter{page}\@ne
    }%
    {\if@restonecol\twocolumn \else \newpage \fi
    }
  \fi}{%
}


% Transclude % sigh, what a pretentious word
\def\transclude#1{\unskip\input{\CurrentFilePath/#1}}

\endinput
